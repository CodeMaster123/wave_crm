<%= javascript_include_tag "searchbox.js" %>
<%= stylesheet_link_tag "pagination.css" %>
<%- model_class = Contact -%>
<div class="page-header">
    <h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1>
</div>

  <div class="control-group">
    <div class="controls">
      Search: <%= text_field_tag :title,"", :class => 'search-c' %>
    </div>
  </div>

<table class="table table-striped">
    <thead>
        <tr>
            <th><%= model_class.human_attribute_name(:id) %></th>
            <th><%= model_class.human_attribute_name(:contact_name) %></th>
            <th><%= model_class.human_attribute_name(:address) %></th>
            <th><%= model_class.human_attribute_name(:mobile_no) %></th>
            <th><%= model_class.human_attribute_name(:landline_no) %></th>
            <th><%= model_class.human_attribute_name(:contact_type) %></th>

            <th><%=t '.actions', :default => t("helpers.actions") %></th>
        </tr>
    </thead>
    <tbody class ="search-data">
        <% @i = 0 %>
        <% @contacts.each do |contact| %>
            <tr>
                <td><%= link_to @i = @i+1, contact_path(contact) %></td>
                <td><%= "#{contact.first_name} #{contact.middle_name} #{contact.last_name}" %></td>
                <td><%= contact.address %></td>
                <td><%= contact.mobile_no %></td>
                <td><%= contact.landline_no %></td>
                <td><%= contact.contact_type %></td>

                <td>
                    <%= link_to t('.edit', :default => t("helpers.links.edit")), edit_contact_path(contact), :class => 'btn btn-mini' %>
                    <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                        contact_path(contact),
                        :method => :delete,
                        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                        :class => 'btn btn-mini btn-danger' %>
                    </td>
                </tr>
            <% end %>
        </tbody>
    </table>
    <% if current_user.account_type == 1 %>

    <div class="flickr_pagination">
      <div class="page_info">
        <%= page_entries_info @contacts %>
      </div>
      <%= will_paginate @contacts, :container => false %>
    </div>
<% end %>

<%= link_to t('.new', :default => t("helpers.links.new")), new_contact_path, :class => 'btn btn-primary' %>

<script>
    $('.search-c').searchbox({
        url: '/contact_search.html',
        param: 'q',
        dom_id: '#search-data',
        delay: 100,
    })

</script>

